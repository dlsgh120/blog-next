{"ast":null,"code":"var _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _temp;\n\nfunction _initializerDefineProperty(target, property, descriptor, context) { if (!descriptor) return; Object.defineProperty(target, property, { enumerable: descriptor.enumerable, configurable: descriptor.configurable, writable: descriptor.writable, value: descriptor.initializer ? descriptor.initializer.call(context) : void 0 }); }\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\nfunction _initializerWarningHelper(descriptor, context) { throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and runs after the decorators transform.'); }\n\nimport { action, observable, computed, makeObservable } from 'mobx';\nimport BaseStore from '../BaseStore';\nimport qs from 'qs';\nimport client from '../../lib/client';\nlet UserStore = (_class = (_temp = class UserStore extends BaseStore {\n  constructor() {\n    super();\n\n    _initializerDefineProperty(this, \"_checkIdStatus\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"initUserInfo\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"checkId\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"createUser\", _descriptor4, this);\n\n    makeObservable(this);\n  }\n\n  get checkIdStatus() {\n    return this._checkIdStatus;\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"_checkIdStatus\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class.prototype, \"checkIdStatus\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"checkIdStatus\"), _class.prototype), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"initUserInfo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      this._checkIdStatus = undefined;\n    };\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"checkId\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async email => {\n      this._checkIdStatus = undefined;\n\n      this._init('CHECK_EMAIL_COMPLETE');\n\n      try {\n        const res = await client.post('/api/users/checkId', qs.stringify({\n          email: email\n        }));\n        this._checkIdStatus = await res.data;\n        this._success[\"CHECK_EMAIL_COMPLETE\"] = true;\n      } catch (e) {\n        this._failure[\"CHECK_EMAIL_COMPLETE\"] = [true, e];\n      } finally {\n        this._pending[\"CHECK_EMAIL_COMPLETE\"] = false;\n      }\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"createUser\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return async (email, password, name, phone) => {\n      this._init('CREATE_USER');\n\n      try {\n        console.log(email, password, name, phone);\n        this._success[\"CREATE_USER\"] = true;\n      } catch (e) {\n        this._failure[\"CREATE_USER\"] = [true, e];\n      } finally {\n        this._pending[\"CREATE_USER\"] = false;\n      }\n    };\n  }\n})), _class);\nexport default UserStore;","map":{"version":3,"sources":["D:/workspace/blog/blog-nextjs/stores/users/userStore.ts"],"names":["action","observable","computed","makeObservable","BaseStore","qs","client","UserStore","constructor","checkIdStatus","_checkIdStatus","undefined","email","_init","res","post","stringify","data","_success","e","_failure","_pending","password","name","phone","console","log"],"mappings":";;;;;;;;AAAA,SAAQA,MAAR,EAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,cAAtC,QAA2D,MAA3D;AAEA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,MAAP,MAAmB,kBAAnB;IAEMC,S,sBAAN,MAAMA,SAAN,SAAwBH,SAAxB,CAAiC;AAC7BI,EAAAA,WAAW,GAAG;AAChB;;AADgB;;AAAA;;AAAA;;AAAA;;AAEhBL,IAAAA,cAAc,CAAC,IAAD,CAAd;AACG;;AAKD,MACIM,aADJ,GACmB;AACf,WAAO,KAAKC,cAAZ;AACH;;AAZ4B,C,wFAM5BT,U;;;;;kEAGAC,Q,sKAKAF,M;;;;;WACc,MAAK;AAChB,WAAKU,cAAL,GAAsBC,SAAtB;AACH,K;;2EAEAX,M;;;;;WACS,MAAMY,KAAN,IAAsB;AAC5B,WAAKF,cAAL,GAAsBC,SAAtB;;AACA,WAAKE,KAAL,CAAW,sBAAX;;AACA,UAAG;AACC,cAAMC,GAAG,GAAG,MAAMR,MAAM,CAACS,IAAP,CAAY,oBAAZ,EAAkCV,EAAE,CAACW,SAAH,CAAa;AAACJ,UAAAA,KAAK,EAACA;AAAP,SAAb,CAAlC,CAAlB;AACA,aAAKF,cAAL,GAAsB,MAAMI,GAAG,CAACG,IAAhC;AACA,aAAKC,QAAL,CAAc,sBAAd,IAAwC,IAAxC;AACH,OAJD,CAIE,OAAMC,CAAN,EAAQ;AACN,aAAKC,QAAL,CAAc,sBAAd,IAAwC,CAAC,IAAD,EAAOD,CAAP,CAAxC;AACH,OAND,SAMS;AACL,aAAKE,QAAL,CAAc,sBAAd,IAAwC,KAAxC;AACH;AACJ,K;;8EAEArB,M;;;;;WACY,OAAMY,KAAN,EAAoBU,QAApB,EAAqCC,IAArC,EAAkDC,KAAlD,KAAkE;AAC3E,WAAKX,KAAL,CAAW,aAAX;;AACA,UAAG;AACCY,QAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ,EAAmBU,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAnC;AACA,aAAKN,QAAL,CAAc,aAAd,IAA+B,IAA/B;AACH,OAHD,CAGE,OAAMC,CAAN,EAAQ;AACN,aAAKC,QAAL,CAAc,aAAd,IAA+B,CAAC,IAAD,EAAOD,CAAP,CAA/B;AACH,OALD,SAKS;AACL,aAAKE,QAAL,CAAc,aAAd,IAA+B,KAA/B;AACH;AACJ,K;;;AAGL,eAAed,SAAf","sourcesContent":["import {action, observable, computed, makeObservable} from 'mobx';\nimport {checkIdStatus} from './types';\nimport BaseStore from '../BaseStore';\nimport qs from 'qs';\nimport client from '../../lib/client';\n\nclass UserStore extends BaseStore{\n    constructor() {\n\t\tsuper();\n\t\tmakeObservable(this);\n    }\n    \n    @observable\n    _checkIdStatus?:checkIdStatus;\n\n    @computed\n    get checkIdStatus(){\n        return this._checkIdStatus;\n    }\n\n    @action\n    initUserInfo = () =>{\n        this._checkIdStatus = undefined;\n    }\n\n    @action\n    checkId = async(email:string) =>{\n        this._checkIdStatus = undefined;\n        this._init('CHECK_EMAIL_COMPLETE');\n        try{\n            const res = await client.post('/api/users/checkId', qs.stringify({email:email}));\n            this._checkIdStatus = await res.data;\n            this._success[\"CHECK_EMAIL_COMPLETE\"] = true;\n        } catch(e){\n            this._failure[\"CHECK_EMAIL_COMPLETE\"] = [true, e];\n        } finally{\n            this._pending[\"CHECK_EMAIL_COMPLETE\"] = false;\n        }\n    }\n\n    @action\n    createUser = async(email:string, password:string, name:string, phone:string) =>{\n        this._init('CREATE_USER');\n        try{\n            console.log(email, password, name, phone);\n            this._success[\"CREATE_USER\"] = true;\n        } catch(e){\n            this._failure[\"CREATE_USER\"] = [true ,e];\n        } finally{\n            this._pending[\"CREATE_USER\"] = false;\n        }\n    }\n}\n\nexport default UserStore;"]},"metadata":{},"sourceType":"module"}